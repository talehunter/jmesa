=== !CellEditor ===
A !CellEditor is used to display the column value. You can either use the pre-canned ones included in JMesa or create something custom. Typically most tables you create will have at least one custom editor. As you will see, creating your own !CellEditor is very easy to do.

First lets go back and clarify how the !CellEditor fits into the grand scheme of things and then I will offer up some examples. If you remember a Column is a component and has attributes that represents the features of the column. A !CellRenderer is set on the Column and has attributes that represents how a column is to be displayed. The !CellEditor is set on the !CellRenderer and represents the actual column value. This keeps things very flexible and allows you to swap out one kind of functionality for another.

The !CellEditor interface looks like the following:

{{{
public interface CellEditor {
    public Object getValue(Object item, String property, int rowcount);
}
}}}

The item is the current row item from the Collection of Beans or Collections of Maps. The property is the current column property that is really a reference to an item attribute. Lastly, the rowcount is the current row. The rowcount does not take in account pagination and with each page starts the count at one. However, if you need to take in account pagination you can find the current page on the Limit object, which can be found on the !CoreContext. 

Like most things the best way to understand this is to see an example. Here is the default !CellEditor named the !BasicCellEditor. It simply returns the current item property. You do not have to do anything to declare this editor as it is the default. I am just showing it as an example of what a !CellEditor looks like.

{{{
public class BasicCellEditor extends AbstractContextSupport implements CellEditor {
    public Object getValue(Object item, String property, int rowcount) {
        Object itemValue = null;

        try {
            itemValue = PropertyUtils.getProperty(item, property);
        } catch (Exception e) {
            e.printStackTrace();
        }

        return itemValue;
    }
}
}}}

The !CellEditors that ship with the JMesa API include the !BasicCellEditor, !DateCellEditor and the !NumberCellEditor. Again, you would not normally work directly with the !BasicCellEditor, but be sure to use it as a reference.

==== !CellEditor Example ====
If you want to create a custom editor then just implement the !CellEditor interface. Here is an example using an anonymous class to create a !CellEditor.

{{{
// Using an anonymous class to implement a custom editor.
firstName.getCellRenderer().setCellEditor(new CellEditor() {
    public Object getValue(Object item, String property, int rowcount) {
        Object value = new BasicCellEditor().getValue(item, property, rowcount);
        HtmlBuilder html = new HtmlBuilder();
        html.a().href().quote().append("http://www.whitehouse.gov/history/presidents/").quote().close();
        html.append(value);
        html.aEnd();
        return html.toString();
    }
});
}}}

The tag would look like this:
{{{
<jmesa:column cellEditor="org.jmesaweb.controller.TagCellEditor">
}}}

==== !DateCellEditor Example ====
If you have a date column chances are you will want to format it. To do that use the !DateCellEditor and pass it a valid date pattern.

{{{
born.getCellRenderer().setCellEditor(new DateCellEditor("MM/yyyy"));
}}}

Or, use the pattern attribute with the cellEditor if you are using the tag library.

{{{
<jmesa:htmlColumn property="born" pattern="MM/yyyy" cellEditor="org.jmesa.view.editor.DateCellEditor"/>
}}}

Also, if this column is filterable you will want to use the [FilterMatcher DateFilterMatcher] to create a filter strategy that matches your column.

==== !NumberCellEditor Example ====
If you have a numeric column chances are you will want to format it. To do that use the !NumberCellEditor and pass it a valid date pattern.

{{{
salary.getCellRenderer().setCellEditor(new NumberCellEditor("###,##0.00"));
}}}

Or, use the pattern attribute with the cellEditor if you are using the tag library.

{{{
<jmesa:htmlColumn property="salary" pattern="###,##0.00" cellEditor="org.jmesa.view.editor.NumberCellEditor"/>
}}}

Also, if this column is filterable you will want to use the [FilterMatcher NumberFilterMatcher] to create a filter strategy that matches your column.

=== !HeaderEditor ===
As of the JMesa 2.2 release I further broke out the column header to include an editor. This works exactly like the cell editor except tailored for the header.

For instance if you wanted to have a header that displayed a checkbox you would do this:
{{{
HtmlColumn htmlColumn = (HtmlColumn)lastName;
htmlColumn.getHeaderRenderer().setHeaderEditor(new HeaderEditor() {
    public Object getValue() {
        return "<input type=\"checkbox\">";
    }
});
}}}

The tag would look like this:
{{{
<jmesa:column headerEditor="org.jmesaweb.controller.TagHeaderEditor">
}}}

=== !FilterEditor ===
As of the JMesa 2.2 release I further broke out the column filter to include an editor. This works exactly like the cell editor except tailored for the filter.

If you wanted to have a filter that displayed a select element you would do this:
{{{
HtmlColumn careerColumn = (HtmlColumn)row.getColumn("career");;
careerColumn.getFilterRenderer().setFilterEditor(new FilterEditor() {
    public Object getValue() {
        return "<select><option value=\"career\">Career</option><option value=\"lawyer\">Lawyer</option></select>";
    }
});
}}}

The tag would look like this:
{{{
<jmesa:column filterEditor="org.jmesaweb.controller.TagFilterEditor">
}}}

Keep in mind though that for this filter example you would still need to add the Javascript to interact with the Javascript Limit. If this is something you are interested in you can look at the !HtmlFilterEditor to see the default example.

=== UML Class Diagrams ===

==== The Editor class diagram. ====

http://extremecomponents.googlepages.com/editor.png
















